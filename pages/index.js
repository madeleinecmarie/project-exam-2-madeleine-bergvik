import Head from "next/head";
import Header from "../components/layout/Header";
import Footer from "../components/layout/Footer";
import Newsletter from "../components/newsletter/Newsletter";
import IconsHomePage from "../components/icons/IconsHomePage";
import Image from "next/image";

export const getStaticProps = async () => {
  const res = await fetch("http://localhost:1337/attractions");
  const data = await res.json();

  return {
    props: { attraction: data },
  };
};

export default function Home({ attraction }) {
  return (
    <>
      <Head>
        <title>Holidaze</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Header />

      <main>
        <div className="home">
          <h1>Why use Holidaze for your booking?</h1>
          <IconsHomePage />
          <div className="home__section-1">
            <h3>
              Free cancellation
              <span className="block">on most of the hotels*</span>
            </h3>
            <h3>15% Bonus</h3>
            <h3>Safe payment</h3>
            <h3>24/7 chat</h3>
          </div>
        </div>

        <div className="attractions">
          <h2 className="attractions__headline">
            Top Attractions in Stavanger
          </h2>

          <div className="attractions__inner">
            {attraction.map(({ id, image, headline, description }) => {
              const myLoader = () => {
                return image;
              };

              return (
                <div key={id} className="attractions__card">
                  <Image
                    src={image}
                    alt="image of attraction"
                    loader={myLoader}
                    height={320}
                    width={345}
                    className="attractions__img"
                  ></Image>
                  <h3 className="attractions__subheadline">{headline}</h3>
                  <p className="attractions__description">{description}</p>
                </div>
              );
            })}
          </div>
        </div>
        <Newsletter />
      </main>
      <Footer />
    </>
  );
}
